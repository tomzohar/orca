<div class="orchestration-container">
  <orca-page-header [title]="projectName()">
    <div actions>
      <!-- View Toggle -->
      <orca-button-group
        class="view-modes"
        [config]="{
          buttons: [
            {
              value: 'kanban',
              icon: { name: icons.view_kanban },
            },
            { value: 'table', icon: { name: icons.view_list } },
          ],
          selected: viewMode(),
          variant: 'secondary',
        }"
        (selectionChanged)="onViewModeChange($event)"
      />

      <!-- Create Job Button -->
      <orca-button
        [config]="{
          variant: 'primary',
          icon: { name: icons.add },
        }"
        (clicked)="onCreateJob()"
      >
        Create job
      </orca-button>
    </div>
  </orca-page-header>
  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-container">
      <orca-spinner [config]="{ size: 'lg' }" />
    </div>
  }

  <!-- Empty State -->
  @if (showEmpty()) {
    <div class="empty-container">
      <orca-empty-state [config]="emptyStateConfig" />
    </div>
  }

  <!-- Kanban Board -->
  @if (showKanban() && viewMode() === 'kanban') {
    <orca-orchestration-kanban
      [jobs]="jobs()"
      (jobClicked)="onJobClick($event)"
      (jobDropped)="onJobDrop($event)"
    />
  }

  <!-- Table View -->
  @if (viewMode() === 'table') {
    <orca-orchestration-table
      [jobs]="jobs()"
      [loading]="isLoading()"
      [error]="hasError() ? 'Failed to load jobs' : null"
      (jobClicked)="onJobClick($event)"
      (jobAction)="onJobAction($event)"
    />
  }
</div>
